!function(i){var e={};i(document).on("sowsetupformfield",".siteorigin-widget-field-type-icon",(function(t){var n=i(this),s=n.find(".siteorigin-widget-icon-selector"),o=s.find(".siteorigin-widget-icon-icon"),a=n.find(".siteorigin-widget-icon-selector-current"),d=n.find(".so-icon-remove"),c=n.find(".siteorigin-widget-icon-search");if(!n.data("initialized")){a.click((function(){s.slideToggle(),c.val(""),r()})),d.click((function(i){i.preventDefault(),n.find(".siteorigin-widget-active").click()}));var r=function(){var e=c.val().toLowerCase();""===e?s.find(".siteorigin-widget-icon-icons-icon").show():s.find(".siteorigin-widget-icon-icons-icon").each((function(){var t=i(this),n=t.attr("data-value");-1===(n=n.replace(/-/," ")).indexOf(e)?t.hide():t.show()}))};c.keyup(r).change(r);var l=function(){var t=s.find("select.siteorigin-widget-icon-family").val(),n=s.find(".siteorigin-widget-icon-icons");if(void 0!==e[t]){n.empty();var c,l=e[t],g=l.icons;for(var f in l.hasOwnProperty("styles")&&l.styles&&(c=s.find(".siteorigin-widget-icon-family-styles").val()),0===i("#siteorigin-widget-font-"+t).length&&i("<link rel='stylesheet' type='text/css'>").attr("id","siteorigin-widget-font-"+t).attr("href",e[t].style_uri).appendTo("head"),g){var v=g[f],w=v.hasOwnProperty("unicode")?v.unicode:v;if(!v.hasOwnProperty("styles")||-1!==v.styles.indexOf(c)){var y="sow-icon-"+t+(c?" "+c:""),h=t+(c?"-"+c:"")+"-"+f,u=i('<div data-sow-icon="'+w+'"/>').attr("data-value",h).addClass(y).addClass("siteorigin-widget-icon-icons-icon").click((function(){var e=i(this);e.hasClass("siteorigin-widget-active")?(e.removeClass("siteorigin-widget-active"),o.val(""),a.find("span").hide(),d.hide()):(n.find(".siteorigin-widget-icon-icons-icon").removeClass("siteorigin-widget-active"),e.addClass("siteorigin-widget-active"),o.val(e.data("value")),a.find("span").show().attr("data-sow-icon",e.attr("data-sow-icon")).attr("class","").addClass(y),d.show()),o.trigger("change",{isRendering:!0}),s.slideUp()}));n.append(u),o.val()===h&&(a.find("span").show().attr("data-sow-icon",u.attr("data-sow-icon")).attr("class","").addClass(y),u.addClass("siteorigin-widget-active"))}}n.prepend(n.find(".siteorigin-widget-active")),r()}},g=function(t){var n=s.find("select.siteorigin-widget-icon-family").val(),o=s.find("select.siteorigin-widget-icon-family option:selected").data("icons");if(null!==o&&(e[n]=o),void 0!==n&&""!==n)if(void 0===e[n]){var a=s.find(".siteorigin-widget-icon-icons");a.addClass("loading"),i.getJSON(soWidgets.ajaxurl,{action:"siteorigin_widgets_get_icons",family:s.find("select.siteorigin-widget-icon-family").val()},(function(o){e[n]=o,function(t){var n=s.find("select.siteorigin-widget-icon-family"),o=n.val();if(void 0!==e[o]){var a=s.find(".siteorigin-widget-icon-family-styles");if(!t){a.off("change",l),a.remove();var d=e[o];if(d.hasOwnProperty("styles")&&d.styles){var c="";for(var r in d.styles)c+='<option value="'+r+'">'+d.styles[r]+"</option>";c&&(a=i('<select class="siteorigin-widget-icon-family-styles"></select>').append(c),n.after(a))}}a.on("change",l)}}(t),a.removeClass("loading"),l()}))}else l()};g(!0),s.find("select.siteorigin-widget-icon-family").change((function(){s.find(".siteorigin-widget-icon-icons").empty(),g()})),o.change((function(i,e){e&&e.isRendering||l()})),n.data("initialized",!0)}}))}(jQuery);